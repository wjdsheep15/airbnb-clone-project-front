__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getExploreIsLeanTreatmentFlag=function(){return!1}}),"0d1817",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var n=r(d[0]).default;function t(){const n=r(d[1]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.ClientNormalizeSearchPaths=function({redirectUrl:n}){const c=(0,p.useLocation)();return n=n??_(c),(0,s.useEffect)((()=>{if(null!=n){const s=(0,t().parsePath)(n);(0,f.replaceToHistory)(s.pathname,{params:(0,E.default)(s.search)})}}),[n]),null},e.getRedirectUrl=_;var s=r(d[2]),c=r(d[3]),l=r(d[4]),o=r(d[5]),u=r(d[6]),E=n(r(d[7])),f=r(d[8]),p=r(d[9]),h=n(r(d[10]));function S(n){return n.replace(/^\/s\/[^/]+\/(homes|experiences)/,'/s/:location/$1')}function _(n){const t=(0,c.selectFiltersFromURL)({pathname:n.pathname,queryString:n.search}),s=(t||{}).refinement_paths,f=(0,l.getTabFromRefinementPaths)(s),p={tabId:f,basePath:u.SEARCH_ENDPOINT};let _=n.search;const R=(0,E.default)(_),O=(0,o.makeSearchPath)(t,p);if(![u.EXPLORE_TABS.HOMES,u.EXPLORE_TABS.EXPERIENCES].includes(f))return f===u.EXPLORE_TABS.ADVENTURES||f===u.EXPLORE_TABS.SELECT_HOMES?(_=decodeURIComponent((0,o.makeQueryStrings)(R,p)),`${O}${_}`):'/';if(s?.some((n=>'string'==typeof n&&n.startsWith('/playlists')))??!1)return'/';const P=s?.[0];if((0,o.isOnlineExperiences)(t,f??u.EXPLORE_TABS.HOMES)&&null!=R.refinement_paths&&'/experiences'!==P&&!(0,o.isOnlineExperiencesSearchRefinementPath)(t))return _=decodeURIComponent((0,o.makeQueryStrings)((0,h.default)(R,['refinement_paths']),p)),`${O}${_}`;if((0,o.isOnlineExperiences)(t,f??u.EXPLORE_TABS.HOMES)&&(null!=t.location||null!=t.query||null!=t.place_id))return _=decodeURIComponent((0,o.makeQueryStrings)((0,h.default)(R,['location','query','place_id']),p)),`${O}${_}`;return S(n.pathname)!==S(O)?`${O}${_}`:null}}),"0ef88a",["ba7a76","d69748","a27fc3","418c7a","aea415","f4229b","87916a","a7c4ef","4ee5a9","1e300f","3d4f9e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isP25=function(n){return null!=n.omni_page_id&&null!=n.dynamic_product_ids||null!=n.pinned_reason&&null!=n.pinned_listings}}),"16c731",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserInputLocation=function(n){return t.some((t=>n[t]))};const t=['place_id','query']}),"1c3fbf",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var n=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.camelKeysToSnakeKeys=function(n){return(0,u.default)(n,o,t.camelToSnakeCachingMiddleware)},e.camelKeysToSnakeKeysWithExceptions=function(n,t){return(0,u.default)(n,(n=>t.includes(n)?n:o(n)))},e.camelToSnake=o,e.default=c,e.deprecatedCamelKeysToSnakeKeys=function(n){return(0,u.default)(n,c)};var t=r(d[1]),u=n(r(d[2]));function c(n){return n.replace(/[A-Z]+/g,(n=>`_${n.toLowerCase()}`))}function o(n){return n.replace(/[A-Z]/g,(n=>`_${n.toLowerCase()}`))}}),"2755ca",["ba7a76","a1321d","3eb10d"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(n){return null==n?[]:Array.isArray(n)?n.flatMap(t):'string'==typeof n?[n]:[JSON.stringify(n)]}Object.defineProperty(e,"__esModule",{value:!0}),e.convertToRawParams=function(n){const s=[];return Object.keys(n).forEach((o=>{const u=t(n[o]);s.push({filterName:o,filterValues:u})})),s}}),"294886",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.selectFiltersFromURL=void 0;var n=t(r(d[1])),o=t(r(d[2])),s=t(r(d[3])),_=r(d[4]),l=r(d[5]),c=r(d[6]),f=t(r(d[7])),u=r(d[8]);function h(t){return(0,s.default)((0,o.default)(t),l.KNOWN_SEARCH_QUERY_PARAMS)}function R(t){const n=t.query||t.place_id||t.location;return'flex_destinations_search'===t.search_mode&&n&&!t.category_tag&&delete t.search_mode,t}const b=(0,n.default)((({pathname:t})=>t||''),(({queryString:t})=>t||''),((t,n)=>{if(['/','','/fallback-homepage'].includes(t))return{tab_id:_.EXPLORE_TABS.ALL,refinement_paths:(0,c.getRefinementPathsFromTab)(_.EXPLORE_TABS.HOMES),search_mode:'flex_destinations_search',...(0,f.default)({...h(n)})};let o={...h(n),...(0,u.getTabLocationFromPath)(t)};return o=R(o),(0,f.default)({...o,...o.refinement_paths?{}:{refinement_paths:(0,c.getRefinementPathsFromTab)(o.tab_id)}})}));e.selectFiltersFromURL=b}),"418c7a",["ba7a76","ab2414","a7c4ef","45db44","87916a","79ac7c","e8a3e4","c6fd31","b8eb4a"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,...n){if(null==t)return{};const u=new Set([...n].flat().map(String));return Object.fromEntries(Object.entries(t).filter((([t])=>u.has(t))))}}),"45db44",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s,e.replaceToHistory=function(t,n={}){s((0,o.getHistory)(),t,n)};var n=t(r(d[1])),o=r(d[2]);function s(t,o,{maintainScrollPosition:s=!1,maintainQueryParams:l=!1,maintainHash:u=!1,params:c,state:f}={}){const p=(0,n.default)(o,{maintainQueryParams:l,maintainHash:u,params:c});t.replace(p,f),g.window&&!s&&g.window.scrollTo(0,0)}}),"4ee5a9",["ba7a76","be6a20","7934b6"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getItemsPerGrid=function({isReduceNetworkDataEnabled:f,isPWA:o,urlFilters:h,isMapRequest:_,isPrefetch:l}){if(_)return f&&!l?8:null;if(f)return 8;if((0,n.isBot)())return o?2:6;if((0,s.hasUserInputLocation)(h)&&(p=h,p.refinement_paths?.[0]?.startsWith('/homes')))return 18;var p;if(!o&&c(h)&&u(h))return 24;return t.LISTINGS_PER_PAGE};var t=r(d[0]),n=r(d[1]),s=r(d[2]);function u(t){return!(!t.checkin||!t.checkout)}function c(t){return t.refinement_paths?.[0]?.startsWith('/experiences')}}),"72c4f8",["6660fd","e9b7bf","1c3fbf"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.manageTreatmentFlagsWithUpfrontPricingFlag=function(t){return U(t,!!u.default.current().enable_upfront_pricing)},e.manageTreatmentFlagsWithUpfrontPricingFlagForPrepare=function(t,n){let o=!1;const u=n('_user_attributes');try{o=JSON.parse(decodeURIComponent(u||'')).enable_upfront_pricing}catch(t){}return U(t,o)},e.maybeRemoveUpfrontPricingParamsFromUrl=function(){requestIdleCallback((()=>{const t=u.default.current().enable_upfront_pricing;void 0!==t&&(0,s.airdogCount)('search.upfront_pricing.access_with_cookie',1,`value: ${t}`)}));(0,l.default)()[P]&&(0,f.getHistory)().replace(E())},e.setEnableUpfrontPricing=async function(t){return await(p.default.getBootstrap('api_web_client_migration.fejax.enabled')&&!p.default.getBootstrap('api_web_client_migration.fejax.pricing_guest.kill_switch')?(0,h().logMigration)(b().default.get("/_/core-guest-loop/upfront-pricing",{searchParams:{enable_upfront_pricing:t?'true':'false'}}),{method:'GET',client:'niobe',migrationId:'pricing_guest',group:'fejax'}):(0,h().logMigration)(c.default.ajax("/_/core-guest-loop/upfront-pricing?enable_upfront_pricing="+(t?'true':'false'),{dataType:'json',processResponse:!1}),{method:'GET',client:'fejax',migrationId:'pricing_guest',group:'fejax'})),u.default.setCurrent({...u.default.current(),enable_upfront_pricing:t}),Promise.resolve()},e.shouldShowUpfrontPricingBanner=function(){if(p.default.getBootstrap('pricing_upfront_pricing_2022_toggle_killswitch'))return!1;if(T())return!1;return!0};var n=t(r(d[1])),o=r(d[2]),u=t(r(d[3])),c=t(r(d[4])),l=t(r(d[5])),f=r(d[6]),p=t(r(d[7])),s=r(d[8]),_=r(d[9]);function b(){const n=t(r(d[10]));return b=function(){return n},n}function h(){const t=r(d[11]);return h=function(){return t},t}var I=t(r(d[12]));const P='enable_upfront_pricing',w='upfront_pricing_enabled',C=['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE','GB','IS','LI','NO','AU','KR','CH','HU','CA','IL','CN','NZ'];function E(){const t=(0,l.default)(),{pathname:n,hash:u}=window.location,c={...t};delete c[P];return`${n}?${(0,o.stringify)(c)}${u}`}function T(){return!!(C.includes(n.default.country())||C.includes(n.default.tld_country())||(0,_.isInChinaFlow)())}function U(t,n){let o=t;return n||(o=t.filter((t=>t!==w))),n&&!t.includes(w)&&(o=[...t,w]),o.filter(I.default)}}),"74d137",["ba7a76","862e50","e950a3","06a99e","c3984f","a7c4ef","7934b6","c235f8","3e4681","b7eb08","69a7c4","7c530a","f30bc0"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KNOWN_SEARCH_QUERY_PARAMS=e.DORA_FILTER_KEYS=void 0;const _=['additional_refinements','adults','airbnb_org_search_type','amenities_to_filter_out','amenities','autosuggestions_options','bathroom_privacy','blocked_poi_categories','business_employee_host','bypass_targetings','campaign','cancel_policies','category_tag','category_tags','cause_id','cdn_cache_safe','cdn_experiments','channel','checkin','checkout','children','china_p1_campaign_playlist_experiment','china_p1_spring_campaign_experiment','class_of_service','click_referer','collection_ids','contextual_type','covid_eligible','current_experience_id','date_picker_type','deb','disable_auto_translation','disable_homes_personalization','disaster_id','discounted_stays','dynamic_product_ids','dynamic_section_unique_ids','email_campaign_id','email_page_id','emp_host','excluded_listing_ids','experience_accessibility_tags','experience_categories','experience_has_early_bird_discount','experience_kg_or_tag','experience_kg_or_tags','experience_languages','experience_price_max','experience_price_min','experience_private_booking_only','experience_ref_id','experience_ref_type','experience_social_good_only','experience_tier_ids','experience_time_of_day','experience_whitelist_ids','federated_search_session_id','field_selector','filter_cause_only','flex_destinations_session_id','flexible_cancellation','flexible_date_search_filter_type','flexible_trip_dates','flexible_trip_lengths','force_erf_assignments','force_erf_names','force_sections_load','format','free_cancellation','from_lts','gps_lat','gps_lng','guest_from_sem_traffic','guest_from_seo_traffic','guests','has_cost_effective','has_host_promotion','has_zero_guest_treatment','host_id','host_promotion_type_ids','host_rule_type_ids','ib','inc_engine_channel','infants','inst','ircid','is_additional_refinements_hierarchical','is_from_p0','is_guided_search','is_magic_carpet','is_nearby_subway','is_prefetch','is_user_submitted_query','items_offset','items_per_carousel','items_per_grid','kg_and_tags','kg_or_tag','kg_or_tags','l2_property_type_ids','languages','lap_infants','last_search_session_id','lat','listing_tags','listing_types','lng','location_search','location','luxury_quality_levels','map_toggle','max_duration','max_start_time','max_travel_time','max_travel_time_changed','max_trip_length','metadata_only','min_bathrooms','min_bedrooms','min_beds','min_start_time','min_trip_length','monthly_length','monthly_start_date','monthly_end_date','monthly_dial_flexible_date_search_filter_type','ne_lat','ne_lng','num_autosuggestions_items_per_section','num_autosuggestions_sections','num_whitelist_listings','offer_uuid','omni_page_id','omni_version_id','opts','other_preference_tags','parent_city_place_id','pets','place_area','place_id','playlist_id','poi_categories','poi_group','poi_id','poi_place_ids','poi_tab','preview','price_bucket','price_filter_input_type','price_filter_num_nights','price_max','price_min','property_type_id','query','radius','rank_mode','refinement_paths','refinements','room_types','s_tag','satori_config_token','satori_options','satori_version','screen_height','screen_size','screen_width','search_by_map','search_mode','search_monthly_stays','search_segment_index','search_source_for_logging','search_type','seasonal_cancellation_policy_ids','section_limit','section_offset','selected_listing_id','selected_tab_id','sem_keywords','show_ranking_debug_info','simple_search_search_input','simple_search_treatment','source','superhost','sw_lat','sw_lng','tab_id','tier_ids','timezone_offset','timezone','title_type','traffic_source','treatment_flags','trip_duration_type_ids','trip_end_date','trip_start_date','trip_type','update_price_histogram','url_slug','user_lat','user_lng','venue_type_filter_tags','version','work_trip','zoom_level','guest_favorite'];e.DORA_FILTER_KEYS=_;const t=[..._,'acp_id','airmoji','clh','china_sem_source','cursor','disable_announcement_curtain','drawer_open','inst','keyword','niobe_test_destinations','pagination_search','poi_place_id','poi_search','search_params','wishlist_item_id','zoom'];e.KNOWN_SEARCH_QUERY_PARAMS=t}),"79ac7c",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.logMigration=function(t,c){return Promise.resolve(t).then((()=>u({...c,result:'success'}))).catch((t=>{u({...c,result:'error',responseStatus:t?.status,noError:!t}),o.default.getBootstrap('niobe.rest.error_logging.kill_switch')||!t||t.status&&200!==t.status||((0,s.airdogCount)('rest_migration.debug',1,{...c,responseStatus:t.status,responseStatusText:t.statusText,message:t.message||'',name:t.name||''}),(0,n().reportNiobeError)(t,{fingerprint:['niobe'],tags:{...c}}))})).catch((()=>{})),t};var s=r(d[1]),o=t(r(d[2]));function n(){const t=r(d[3]);return n=function(){return t},t}function u(t){(0,s.airdogCount)('rest_migration.request',1,t)}}),"7c530a",["ba7a76","3e4681","c235f8","8e002d"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default,o=r(d[1]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.formatFiltersForExploreRequest=function(t){return(0,n.snakeKeysToCamelKeys)((0,u.default)((0,l.coerceCorrectTypes)(t,{forRequest:!0}),f.DORA_FILTER_KEYS))},e.formatRawURLParamsIntoFilters=void 0,e.getConstantFields=function(){return{metadata_only:!1,version:s.EXPLORE_TABS_API_VERSION}};var s=r(d[2]),n=r(d[3]),u=o(r(d[4])),l=t(r(d[5])),f=r(d[6]);const R=l.default;e.formatRawURLParamsIntoFilters=R}),"833694",["45f788","ba7a76","87916a","fd0757","45db44","c6fd31","79ac7c"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.clearGlobalRehydrationCache=function(){const t=o();t.searchResults=null,t.mapSearchResults=null},e.getGlobalRehydrationCache=o,e.getRehydratableListingIds=function({searchResults:t,mapSearchResults:s}){if(!(null!=t&&0!==t?.length||null!=s&&0!==s?.length))return u;const l=new Set,c=[...t||[],...s||[]]?.map((t=>('ExploreSplitStaysListingItem'===t.__typename&&t?.splitStaysListings?.forEach((t=>{null!=t?.id&&l.add(t.id)})),'SkinnyListingItem'===t?.__typename?t.listingId:'StaySearchResult'===t?.__typename?t.listing?.id:null))).filter(n.default),o=new Set(c);return l.forEach((t=>o.delete(t))),Array.from(o)},e.getVariablesWithoutRehydrationIDs=function(t){if(null==t)return;const s={...t,staysSearchRequest:{...t.staysSearchRequest},staysMapSearchRequestV2:{...t.staysMapSearchRequestV2}};return delete s?.staysSearchRequest?.skipHydrationListingIds,delete s?.staysMapSearchRequestV2?.skipHydrationListingIds,s},e.rehydrateFeedSearchResults=function({searchResultsContainingSkinnyListings:t,previousSearchResults:s,previousMapSearchResults:u}){let c=!0;const o=h(s,u),y=t?.map((t=>{if('SkinnyListingItem'===t.__typename){if(null==t.listingId)return null;const s=o.get(t.listingId);return null==s?(c=!1,null):s}return t})).filter(n.default);c||(0,l.reportError)(new Error('StaysSearchRoute.rehydrateFeedSearchResults: Could not rehydrate all search results. '));return y},e.rehydrateMapSearchResults=function({mapSearchResultsContainingSkinnyListings:t,previousSearchResults:s,previousMapSearchResults:u}){let c=!0;const o=h(s,u),y=t?.map((t=>{if('SkinnyListingItem'===t.__typename){if(null==t.listingId)return null;const s=o.get(t.listingId);return null==s?(c=!1,null):s}return t})).filter(n.default)||null;c||(0,l.reportError)(new Error('StaysSearchRoute.rehydrateMapSearchResults: Could not rehydrate all search results. '));return y};var s=t(r(d[1])),n=t(r(d[2])),l=r(d[3]);const u=[],c='stays_search_rehydration_cache';function o(){return s.default.setIfMissingThenGet(c,(()=>({searchResults:null,mapSearchResults:null})))}function h(t,s){const n=new Map;return[...t||[],...s||[]].forEach((t=>{'StaySearchResult'===t?.__typename&&null!=t.listing?.id&&n.set(t.listing?.id,t)})),n}}),"926f8b",["ba7a76","29c0a5","f30bc0","f2f40f"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,n=(0,u.default)()){return n.find((({experiment:u})=>u===t))};var u=t(r(d[1]))}),"9439c5",["ba7a76","23c701"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STAYS_SEARCH_FILTER_KEYS=e.KNOWN_SEARCH_QUERY_PARAMS=void 0;const _=['cursor','autosuggestions_options','max_categories','metadata_only','satori_version','search_type','source','treatment_flags','raw_params'];e.STAYS_SEARCH_FILTER_KEYS=_;const t=[..._,'inst','niobe_test_destinations','zoom'];e.KNOWN_SEARCH_QUERY_PARAMS=t}),"977a9f",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1]));var c={document:void 0,getDocument:()=>r(d[3])(d[2]).then(u.default).then((t=>t.default)),name:'StaysSearch',type:'query',operationId:'c11c7897be8261567c3625c23a48d053242e6e29d38883b3d756ce7b09275f9a'};e.default=c}),"a06569",["ba7a76","45f788","68b1a1","c592d7"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({location:t,cookie:T,loadQuery:v,exploreTreatments:S,getRenderingState:b,customPrepareNiobeData:k,getErf:O,previousPrepareProps:E}){const{deviceUsagePreferences:C,isBotRequest:D,formFactor:M=n.DEFAULT_FORM_FACTOR}=k||{},{isReduceNetworkDataEnabled:P}=C||{},I=(0,o.createTaskController)(),x=(0,c.default)(t.search),A=null==x.search_type||x.search_type===f.SearchType.USER_MAP_MOVE&&null!=E;A&&(0,l.default)({experimentName:M===n.FORM_FACTOR.WIDE?p:F,exploreTreatments:S,renderingState:b(),getErfServer:O});const U=(0,y.default)(S),q=U?.includes(M===n.FORM_FACTOR.WIDE?s.staysSearchRehydrationDesktopTreatmentFlag:s.staysSearchRehydrationMoWebTreatmentFlag),w=E?.queryRef?.result?.data?.presentation?.staysSearch?.results?.categoryBar?.categoryBarCacheId,B=(0,_.default)({categoryBarCacheId:w,cookie:T,exploreTreatments:S,getRenderingState:b,location:t,formFactor:M,isReduceNetworkDataEnabled:P,previousListingIds:q&&A?(0,h.getRehydratableListingIds)((0,h.getGlobalRehydrationCache)()):void 0}),N=(0,u.getRedirectUrl)(t);let L=!1;D||(L=!0);return{queryRef:v({context:{fetchOptions:{signal:I?.signal},taskController:I},variables:B,query:R.default,deferrable:L,usePOSTForQuery:!0,skip:null!=N}),showDeferredSkeleton:L,redirectUrl:N}};var o=r(d[1]),s=r(d[2]),n=r(d[3]),l=t(r(d[4])),c=t(r(d[5])),u=r(d[6]),y=t(r(d[7])),f=r(d[8]),h=r(d[9]),_=t(r(d[10])),R=t(r(d[11]));const p='stays_search_rehydration_desktop_v6',F='stays_search_rehydration_moweb_v6'}),"a829bd",["ba7a76","a2c93f","dc5d1d","b679e8","d271b5","a7c4ef","0ef88a","6e1627","6660fd","926f8b","a8e410","a06569"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default,n=r(d[1]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({categoryBarCacheId:t,exploreTreatments:n,location:E,formFactor:T,isReduceNetworkDataEnabled:h,previousListingIds:P,cookie:k}){const M=(0,s.default)(E.search),{mock:S}=M,x=T===l.FORM_FACTOR.COMPACT,y=!(0,f.isP25)(M),A=F(n),I=[...y?_.P2_MAP_FEED_DECOUPLING_TREATMENT_FLAGS:[],...(0,o.default)(A)];if(S)return{mockIdentifier:`ExplorePresentation/${S}`,includeMapResults:y,isLeanTreatment:(0,p.getExploreIsLeanTreatmentFlag)()};let C=(0,c.selectFiltersForRequest)({location:E,cdnCacheSafe:!1,cdnExperiments:void 0,treatmentFlags:(0,u.manageTreatmentFlagsWithUpfrontPricingFlagForPrepare)(I,k),isPWA:x,isReduceNetworkDataEnabled:h});t&&['category_change','filter_change'].includes(C.searchType||'')&&(C={...C,categoryBarCacheId:t});const q=P&&P?.length>0?P:void 0,L=(0,R.default)({location:E,requestedPageType:'STAYS_SEARCH',exploreRequest:C,skipHydrationListingIds:q,isReduceNetworkDataEnabled:h,maxMapItems:(0,R.getMaxMapItems)({isReduceNetworkDataEnabled:h})}),b=(0,c.selectFiltersForRequest)({location:E,cdnCacheSafe:!1,cdnExperiments:void 0,treatmentFlags:(0,u.manageTreatmentFlagsWithUpfrontPricingFlagForPrepare)(I,k),isPWA:x,isMapRequest:!0,isReduceNetworkDataEnabled:h}),w=(0,R.default)({location:E,requestedPageType:'STAYS_SEARCH',exploreRequest:b,skipHydrationListingIds:q,isReduceNetworkDataEnabled:h});return{staysSearchRequest:L,...y&&{staysMapSearchRequestV2:w},includeMapResults:y,isLeanTreatment:(0,p.getExploreIsLeanTreatmentFlag)()}};var s=n(r(d[2])),o=n(r(d[3])),c=r(d[4]),l=r(d[5]),u=r(d[6]),p=r(d[7]),f=r(d[8]),_=r(d[9]),R=t(r(d[10]));function F(t){const n=new Set(['feed_map_decouple_homepage_desktop','feed_map_decouple_homepage_moweb']);return t?.filter((({experiment:t})=>!n.has(t)))}}),"a8e410",["45f788","ba7a76","a7c4ef","6e1627","de269f","b679e8","74d137","0d1817","16c731","f36c5b","e16093"]);
__d((function(g,r,i,a,m,e,d){"use strict";let P,E,L,S;Object.defineProperty(e,"__esModule",{value:!0}),e.TIER_TYPES=e.TIER_IDS=e.PDP_URL_TYPES=e.PDP_TYPES=void 0,e.getTier=function(L){switch(L){case E.LUXURY:return P.LUXURY;case E.PLUS:return P.PLUS;case E.MARKETPLACE:default:return P.MARKETPLACE}},e.TIER_TYPES=P,(function(P){P.LUXURY="luxury",P.PLUS="plus",P.MARKETPLACE="marketplace"})(P||(e.TIER_TYPES=P={})),e.TIER_IDS=E,(function(P){P[P.LUXURY=2]="LUXURY",P[P.PLUS=1]="PLUS",P[P.MARKETPLACE=0]="MARKETPLACE"})(E||(e.TIER_IDS=E={})),e.PDP_TYPES=L,(function(P){P.MARKETPLACE="MARKETPLACE",P.PLUS="PLUS",P.HOTEL="HOTEL",P.LUXE="LUXE"})(L||(e.PDP_TYPES=L={})),e.PDP_URL_TYPES=S,(function(P){P.ROOMS="ROOMS",P.ROOMS_PLUS="ROOMS_PLUS",P.HOTELS="HOTELS",P.LUXURY_LISTINGS="LUXURY_LISTINGS"})(S||(e.PDP_URL_TYPES=S={}))}),"bcda48",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.coerceCorrectTypes=A,e.default=function(t){let n={...t};h.forEach((t=>{Array.isArray(n[t])&&(n[t]=n[t].find(Boolean)),n[t]||delete n[t]})),'string'==typeof n.refinement_paths&&(n.refinement_paths=[n.refinement_paths]);(0,_.default)(n,'location')&&(n.location=b(n.location));return n=A(n),x(n),n};var _=t(r(d[1])),n=r(d[2]);const s=13,l=Object.freeze(['sw_lat','sw_lng','ne_lat','ne_lng']),o=['lat','lng','radius','min_bathrooms'],c=['adults','cause_id','children','disaster_id','guests','infants','items_offset','items_per_grid','lap_infants','max_duration','max_start_time','max_travel_time','max_trip_length','min_bedrooms','min_beds','min_start_time','min_trip_length','monthly_length','pets','price_bucket','price_max','price_min','experience_price_max','experience_price_min','search_segment_index','section_offset','selected_listing_id','flexible_date_search_filter_type','price_filter_num_nights','price_filter_input_type','zoom_level','monthly_dial_flexible_date_search_filter_type'],u=['btsr','business_employee_host','bypass_targetings','covid_eligible','disable_auto_translation','discounted_stays','empHost','experience_private_booking_only','experience_social_good_only','filter_cause_only','flexible_cancellation','from_lts','hide_dates_and_guests_filters','ib','is_nearby_subway','map_toggle','max_travel_time_changed','metadata_only','preview','search_by_map','search_monthly_stays','superhost','update_price_histogram','work_trip','guest_favorite'],p=['amenities','cancel_policies','collection_ids','experience_categories','experience_languages','experience_product_types','guidebook_item_types','host_promotion_type_ids','host_rule_type_ids','hosting_amenities','languages','listing_types','luxury_quality_levels','property_type_id','restaurant_service_types','seasonal_cancellation_policy_ids','tier_ids','trip_duration_type_ids'],f=['cuisine_filter_tags','dietary_preference_filter_tags','dynamic_section_unique_ids','experience_refinement_tags','flexible_trip_dates','flexible_trip_lengths','kg_and_tags','kg_or_tags','experience_accessibility_tags','experience_kg_or_tags','other_preference_tags','refinement_paths','restaurant_book_types','restaurant_cuisine_types','venue_type_filter_tags'],y=['dynamic_product_ids'],h=Object.freeze(['location','query','place_id']);function b(t){return t?(0,n.locationFromURLParameter)(t):t}function x(t){delete t.action,delete t.controller,delete t.page,delete t.refinements,delete t.refinement_path,(0,_.default)(t,'guests')&&!t.guests&&delete t.guests}function v(t){return Math.trunc(Number(t))||0}function k(t){return Number(t)||0}function A(t,{forRequest:n}={forRequest:!1}){const h={...t};return(0,_.default)(h,'zoom')&&(h.zoom=''===h.zoom?s:Number(h.zoom)),o.forEach((t=>{(0,_.default)(h,t)&&(h[t]=k(h[t]))})),c.forEach((t=>{(0,_.default)(h,t)&&(h[t]=v(h[t]))})),l.forEach((t=>{var s;(0,_.default)(h,t)&&(h[t]=n?(s=h[t])?String(s):'':k(h[t]))})),p.forEach((t=>{(0,_.default)(h,t)&&(Array.isArray(h[t])?h[t]=h[t].map(v):delete h[t])})),f.forEach((t=>{(0,_.default)(h,t)&&(Array.isArray(h[t])?h[t]=h[t].map(String):delete h[t])})),y.forEach((t=>{(0,_.default)(h,t)&&(Array.isArray(h[t])||(h[t]=[h[t]]),h[t]=h[t].filter(Boolean).filter((t=>!/\D/.test(String(t))))),h[t]&&0===h[t].length&&delete h[t]})),u.forEach((t=>{(0,_.default)(h,t)&&(h[t]='true'===h[t]||'1'===h[t]||!0===h[t])})),h}}),"c6fd31",["ba7a76","750095","5cf60b"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({experimentName:t,exploreTreatments:u,renderingState:o,getErfServer:f}){const{treatmentName:s,log:c}=(0,l.default)(t,u)||{};s&&'manual'===c&&('server-render'===o?f(t):'client-render'===o&&n.default.logCustomHashing(t,s))};var n=t(r(d[1])),l=t(r(d[2]))}),"d271b5",["ba7a76","fc0842","9439c5"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.selectFiltersForRequest=void 0;var s=t(r(d[1])),l=r(d[2]),n=r(d[3]),c=r(d[4]),o=r(d[5]);const u=(0,s.default)((({location:t})=>t.pathname||''),(({location:t})=>t.search||''),(({treatmentFlags:t})=>t||[]),(({cdnCacheSafe:t})=>t??!1),(({cdnExperiments:t})=>t),(({isPWA:t})=>t),(({isReduceNetworkDataEnabled:t=!1})=>t),(({isMapRequest:t=!1})=>t),(({isPrefetch:t=!1})=>t),((t,s,u,_,f,F,p,R,h)=>{const q=(0,n.satorifyQuery)((0,c.selectFiltersFromURL)({pathname:t,queryString:s}));F&&delete q.map_toggle;const P=(0,o.getItemsPerGrid)({isMapRequest:R,isPrefetch:h,isReduceNetworkDataEnabled:p,isPWA:F,urlFilters:q});return(0,l.formatFiltersForExploreRequest)({...(0,l.getConstantFields)(),...q,...null!==P?{items_per_grid:P}:{},cdn_cache_safe:_,...f?{cdn_experiments:f}:{},treatment_flags:u,screen_size:F?'small':'large'})}));e.selectFiltersForRequest=u}),"de269f",["ba7a76","ab2414","833694","ea30d6","418c7a","72c4f8"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default,n=r(d[1]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getMaxMapItems=function({isReduceNetworkDataEnabled:t}){return t?8:9999},e.getRawParamSingleValue=function(t,n){return E(t,n)?.[0]??null},e.merge=function(t,n,s){const{rawParams:u,...o}=t,{rawParams:c,...f}=n,p=new Set(Object.keys(s||{}).map(l.default)),R={};u?.forEach((({filterName:t,filterValues:n})=>{t&&!p.has(t)&&(R[t]=n)})),c?.forEach((({filterName:t,filterValues:n})=>{t&&(R[t]=n)}));const y=N(Object.entries(R).map((([t,n])=>({filterName:t,filterValues:n}))));return{...o,...f,rawParams:y}},e.selectFiltersFromURL=w,e.selectSearchFiltersForRequest=P,e.sortedRawParams=N;var s=n(r(d[2])),l=t(r(d[3])),u=t(r(d[4])),o=n(r(d[5])),c=r(d[6]),f=n(r(d[7])),p=r(d[8]),R=r(d[9]),y=r(d[10]);function _(t,n){return(0,l.snakeKeysToCamelKeys)((0,s.default)((0,u.coerceCorrectTypes)(t,{forRequest:!0}),n))}function S(t){return(0,s.default)((0,f.default)(t),y.KNOWN_SEARCH_QUERY_PARAMS)}function w({queryString:t}){const n={...S(t)};return{...(0,u.default)({...n})}}function E(t,n){if(null!=t){const s=t.find((t=>t?.filterName===n));if(null!=s?.filterValues&&s.filterValues.length>0)return s.filterValues}return null}function N(t){const n=[...t];return n.sort(((t,n)=>(t?.filterName??'').localeCompare(n?.filterName??''))),n}function P({location:t,exploreRequest:n,filterKeys:u,isReduceNetworkDataEnabled:R=!1}){const y=(0,o.default)(n,...u.map(l.default)),S=w({queryString:t?.search}),E=(0,s.default)((0,c.camelKeysToSnakeKeys)(n),u);return{..._({...S.cursor&&{cursor:S.cursor},...R&&{max_categories:8},...E,raw_params:N([...(0,p.convertToRawParams)(y),...(0,p.convertToRawParams)((P=t?.search||'',(0,l.snakeKeysToCamelKeys)((0,s.default)((0,f.default)(P),['pinned_reason','pinned_listings']))))])},u)};var P}var T=function({location:t,exploreRequest:n,requestedPageType:s,isReduceNetworkDataEnabled:l=!1,skipHydrationListingIds:u,maxMapItems:o}){const c={requestedPageType:s,...P({location:t,exploreRequest:n,filterKeys:y.STAYS_SEARCH_FILTER_KEYS,isReduceNetworkDataEnabled:l}),...null!=o&&{maxMapItems:o}};return c.searchType===R.SearchType.USER_MAP_MOVE&&u?.length?{...c,skipHydrationListingIds:u}:c};e.default=T}),"e16093",["45f788","ba7a76","45db44","fd0757","c6fd31","3d4f9e","2755ca","a7c4ef","294886","6660fd","977a9f"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.clearNullAndUndefinedParams=function(t,l=[]){const f=l.filter((u=>(0,n.default)(t||{},u)&&[null,void 0].includes(t[u])));return(0,u.default)(t,f)},e.removeNanParams=function(t,l){const f=l.filter((u=>(0,n.default)(t||{},u)&&Number.isNaN(t[u])));return(0,u.default)(t,f)},e.satorifyQuery=function(t){const{location:n,query:u,...l}=t||{};return{...l,query:u||n}};var n=t(r(d[1])),u=t(r(d[2]))}),"ea30d6",["ba7a76","750095","3d4f9e"]);
__d((function(g,r,i,a,m,e,d){"use strict";var _;Object.defineProperty(e,"__esModule",{value:!0}),e.P2_MAP_FEED_DECOUPLING_TREATMENT_FLAGS=e.HOMEPAGE_MAP_FEED_DECOUPLING_TREATMENT_FLAGS=void 0,(function(_){_.M2="decompose_stays_search_m2_treatment",_.M3="decompose_stays_search_m3_treatment",_.M3_5="decompose_stays_search_m3_5_treatment",_.M4="decompose_stays_search_m4_treatment",_.M5="decompose_experiences_search_m5_treatment",_.M9="decompose_filters_treatment",_.CLEANUP="decompose_schema_cleanup"})(_||(_={}));_.M4,_.M2,_.M3,_.M3_5,_.M5,_.M3,_.M2,_.M3,_.M3_5,_.M4,_.M5,_.M9,_.CLEANUP;e.P2_MAP_FEED_DECOUPLING_TREATMENT_FLAGS=['feed_map_decouple_m11_treatment'];e.HOMEPAGE_MAP_FEED_DECOUPLING_TREATMENT_FLAGS=['feed_map_decouple_homepage_treatment']}),"f36c5b",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.isOnlineExperiences=O,e.isOnlineExperiencesSearchRefinementPath=f,e.locationToURLParameter=s,e.makeQueryStrings=u,e.makeSearchPath=N,e.makeSearchURI=function(t,n={}){const E=o(t);0===E.section_offset&&delete E.section_offset;0===E.items_offset&&delete E.items_offset;const{tabId:_}=n;E.tab_id&&E.tab_id!==_&&(E.tab_id=_);let c=N(t,n);return c+=u(E,n),c};var n=t(r(d[1])),E=t(r(d[2])),_=r(d[3]),c=r(d[4]),l=r(d[5]);function s(t){return(t||'').replace(/\//g,' ').replace(/\)/g,'').replace(/\(/g,'').replace(/\]/g,'').replace(/\[/g,'').replace(/\\/g,'').replace(/\?/g,'').replace(/\s+/g,' ').replace(/-/g,'~').replace(/, ?/g,'--').replace(/ /g,'-').replace(/#/g,'%23').replace(/\./g,'%252E')}function o(t){const n={...t};return['checkin','checkout'].forEach((n=>{t[n]})),n}function u(t,l={}){const{tabId:s}=l,o=Object.freeze(['location','baseUrl','additional_refinements']),u=[...o,'query'];let S=(0,E.default)(t,t.location?o:u);p(t)&&(S.category_tag='Tag:8253',delete S.tier_ids),s===_.EXPLORE_TABS.ADVENTURES?S.refinement_paths=['/experiences/KG/Tag:639']:s===_.EXPLORE_TABS.SELECT_HOMES?(S.tier_ids=[c.TIER_IDS.PLUS],delete S.refinement_paths):s===_.EXPLORE_TABS.FLIGHTS&&(S={});const I=n.default.stringify(S,{arrayFormat:'brackets'});return I.length>0?`?${I}`:''}const S='Tag:6951',I=['Tag:7983','Tag:8020','Tag:8059'],R=Object.freeze(['EXPERIENCES_JUST_ADDED_GROUPING','EXPERIENCES_SELECTED_TIME_TYPE_GROUPING','EXPERIENCES_SELECTED_TAGS_GROUPING','EXPERIENCES_TOP_BOOKED_ONLINE_GROUPING','EXPERIENCES_TAXONOMY_PERSONALIZATION','EXPERIENCES_GEO_LEADERBOARD','EXPERIENCES_CONTINUE_BROWSING','EXPERIENCES_PERSONALIZED_CO_BOOKS','EXPERIENCES_BOOK_AGAIN','EXPERIENCES_UPCOMING_DESTINATION','EXPERIENCES_PRIVATE_BOOKING','EXPERIENCES_TEST_RUN','EXPERIENCES_SERIES','EXPERIENCES_CONTINUE_SERIES','EXPERIENCES_WISHLIST']);function T(t,n){return!!t?.some((t=>{const E=t?.split('/');if(!E||!t?.includes('/section'))return!1;const _=E[E.length-1].split(':')[0];return n.includes(_)}))}function f(t){return n=t.refinement_paths,E=[S,...I],!!n?.some((t=>{const n=t?.split('/');if(!n||0===n.length)return!1;const _=n[n.length-1],c=new Set(_.split(','));return E.some((t=>c.has(t)))}))||T(t.refinement_paths,R);var n,E}function O(t,n){return n===_.EXPLORE_TABS.EXPERIENCES&&(!!t.additional_refinements?.includes('online')||f(t)||t.kg_or_tag===S||t.kg_or_tags?.includes(S))}function P(t,n){return('flex_destinations_search'===t.search_mode||n===_.EXPLORE_TABS.HOMES&&null==t.search_mode)&&null==t.location&&null==t.query&&null==t.place_id&&!(null!=t.omni_page_id&&null!=t.dynamic_product_ids)&&null==t.host_id}function N(t,n={}){const{tabId:E}=n,c=(0,l.buildTabId)({requestFilters:t,currentTab:E}),o=c===_.EXPLORE_TABS.STORIES,u=!!t.clh,S='p2'===t.china_sem_source,I=E===_.EXPLORE_TABS.FLIGHTS;if(P(t,c))return'/';if(O(t,c))return`/${_.SEARCH_ENDPOINT}/experiences/online`;let R;if(o)R=`/${_.TAB_PATHS[c]}`;else if(u)R='/cl';else if(S)R='/sfx/s';else{if(p(t)||I)return'/';R=n.basePath?`/${n.basePath}`:`/${_.SEARCH_ENDPOINT}`}t.location&&s(t.location)?R+=`/${s(t.location)}`:t.query&&s(t.query)&&(R+=`/${s(t.query)}`),c&&!o&&(R+=`/${_.TAB_PATHS[c]}`);const T=[...t.additional_refinements??[]];return T.length>0&&(R+=`/${T.join("--")}`),R}function p(t){return!!t.tier_ids?.includes(c.TIER_IDS.LUXURY)&&!t.query&&!t.place_id}}),"f4229b",["ba7a76","e950a3","3d4f9e","87916a","bcda48","aea415"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/stays-search/routes/StaysSearchRoute/StaysSearchRoute.prepare.cea836bcc7.js.map